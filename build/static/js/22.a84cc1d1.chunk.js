(this.webpackJsonpunicom=this.webpackJsonpunicom||[]).push([[22],{267:function(e,r,t){"use strict";var n=t(51),a=t.n(n),u=t(82),c=t(278),s=t.n(c),o=t(23),i=t(22),p=s.a.create({baseURL:o.a.envApi});p.interceptors.request.use(function(){var e=Object(u.a)(a.a.mark((function e(r){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=Object(i.a)())&&(r.headers.Authorization="".concat(t)),e.abrupt("return",r);case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()),r.a=p},268:function(e,r,t){"use strict";t.d(r,"a",(function(){return n}));var n=function(e){return e.response.data.errors.message}},288:function(e,r,t){"use strict";t.d(r,"a",(function(){return s})),t.d(r,"d",(function(){return o})),t.d(r,"b",(function(){return i})),t.d(r,"c",(function(){return p}));var n=t(51),a=t.n(n),u=t(82),c=t(267),s=function(){var e=Object(u.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("/powerbi/groups");case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=Object(u.a)(a.a.mark((function e(r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("/powerbi/groups/".concat(r,"/reports"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),i=function(){var e=Object(u.a)(a.a.mark((function e(r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.post("/powerbi/reports/aad",r);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),p=function(){var e=Object(u.a)(a.a.mark((function e(r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.post("/powerbi/reports/embed",r);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},289:function(e,r,t){"use strict";t.d(r,"d",(function(){return o})),t.d(r,"b",(function(){return i})),t.d(r,"a",(function(){return p})),t.d(r,"e",(function(){return d})),t.d(r,"f",(function(){return f})),t.d(r,"c",(function(){return b}));var n=t(51),a=t.n(n),u=t(82),c=t(267),s=t(268),o=function(){var e=Object(u.a)(a.a.mark((function e(r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.post("/reports/list-by-user-with-card",{user_id:r});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),i=function(){var e=Object(u.a)(a.a.mark((function e(r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("/reports/".concat(r));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),p=function(){var e=Object(u.a)(a.a.mark((function e(r,t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.post("/reports/show-by-report",{report_id:r,user_id:t});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),d=function(){var e=Object(u.a)(a.a.mark((function e(r,t,n,u){var o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=JSON.parse(t.card),i={user_id:t.user_id,name:o.name,report_id:o.report_id,group_id:o.group_id,dataset_id:o.dataset_id,roles:t.roles,page_navigation:t.page_navigation},e.prev=2,e.next=5,c.a.post("/reports/store",i);case 5:return e.abrupt("return",r.push("/usuarios/".concat(n,"/relatorios")));case 8:e.prev=8,e.t0=e.catch(2),u({messages:Object(s.a)(e.t0),alert:"alert-orange"});case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(r,t,n,a){return e.apply(this,arguments)}}(),f=function(){var e=Object(u.a)(a.a.mark((function e(r,t,n,u,o){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.put("/reports/".concat(n,"/update"),t);case 3:return e.abrupt("return",r.push("/usuarios/".concat(u,"/relatorios")));case 6:e.prev=6,e.t0=e.catch(0),o({messages:Object(s.a)(e.t0),alert:"alert-orange"});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(r,t,n,a,u){return e.apply(this,arguments)}}(),b=function(){var e=Object(u.a)(a.a.mark((function e(r,t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.delete("/reports/".concat(r));case 2:return e.abrupt("return",n.push("/usuarios/".concat(t,"/relatorios")));case 3:case"end":return e.stop()}}),e)})));return function(r,t,n){return e.apply(this,arguments)}}()},484:function(e,r,t){},487:function(e,r,t){"use strict";t.r(r);var n=t(51),a=t.n(n),u=t(82),c=t(52),s=t(0),o=t(7),i=t(358),p=t(289),d=t(288),f=t(22),b=t(482),l=(t(484),t(1));r.default=function(){var e=Object(o.h)(),r=Object(s.useState)({}),t=Object(c.a)(r,2),n=t[0],v=t[1],m=e.group_id,h=e.report_id,w=e.dataset_id;return Object(s.useEffect)((function(){Object(u.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:new Promise((function(e){return e(Object(f.b)())})).then(function(){var e=Object(u.a)(a.a.mark((function e(r){var t,n,u,c,s,o,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("admin"!==r.data.roles){e.next=6;break}return t={report_id:h},e.next=4,Object(d.b)(t);case 4:n=e.sent,v({reportId:n.reportId,embedUrl:n.embedUrl,token:n.accessToken,type:i.models.TokenType.Aad});case 6:if("user"!==r.data.roles){e.next=23;break}return e.next=9,Object(p.a)(h,r.data.id);case 9:if(!(u=e.sent).roles){e.next=18;break}return c={group_id:m,report_id:h,dataset:w,username:r.data.email,roles:u.roles},e.next=14,Object(d.c)(c);case 14:s=e.sent,v({reportId:s.reportId,embedUrl:s.embedUrl,token:s.embedToken,page_navigation:u.page_navigation,type:i.models.TokenType.Embed}),e.next=23;break;case 18:return o={report_id:h},e.next=21,Object(d.b)(o);case 21:f=e.sent,v({reportId:f.reportId,embedUrl:f.embedUrl,token:f.accessToken,page_navigation:u.page_navigation,type:i.models.TokenType.Aad});case 23:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})))()}),[m,h,w]),Object(l.jsx)(l.Fragment,{children:Object(l.jsx)(b.PowerBIEmbed,{embedConfig:{type:"report",id:n.reportId,embedUrl:n.embedUrl,accessToken:n.token,tokenType:n.type,settings:{panes:{filters:{visible:!1},pageNavigation:{visible:!!n.page_navigation&&n.page_navigation}}}},cssClassName:"report"})})}}}]);
//# sourceMappingURL=22.a84cc1d1.chunk.js.map